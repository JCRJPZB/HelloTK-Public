{"version":3,"sources":["file:///E:/GitHub/HelloTK/assets/Script/StartScene/Loading.ts"],"names":["_decorator","Component","Label","Subscribe","ccclass","property","Loading","onLoad","start_btn","node","getChildByName","load_lbl","getComponent","login_window","active","on","trigger","listen","name"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Label } from 'cc';\r\nimport { SceneMgr } from '../Tools/SceneMgr';\r\nimport { Subscribe } from '../Tools/Subscribe';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Loading')\r\nexport class Loading extends Component {\r\n\r\n    private start_btn: Node | null = null;\r\n    private load_lbl: Label | null | undefined = null;\r\n    private login_window: Node | null = null;\r\n\r\n    // ###### 临时测试用 ######\r\n    private test_enemy: any = { // 武将配置\r\n        \"heros\": [\r\n            {\r\n                \"id\": \"CaoCao_ally\",\r\n                \"name\": \"曹操\",\r\n                \"hero_id\": \"CaoCao\",\r\n                \"prefab\": \"General\",\r\n                \"level\": 60,\r\n                \"hp\": 1800,\r\n                \"atk\": 6000,\r\n                \"def\": 80,\r\n                \"atkEff\": \"default_atk_particle\",\r\n                \"hitEff\": \"default_hit_particle\",\r\n                \"skill_name\": \"default\",\r\n                \"skillEff\": \"default_skill_particle\",\r\n                \"arms\": \"Cavalry_Lv1\",\r\n                \"is_sp\": false,\r\n                \"is_select\": true,\r\n                \"idx\": 0\r\n            },\r\n            {\r\n                \"id\": \"LiuBei_ally\",\r\n                \"name\": \"刘备\",\r\n                \"hero_id\": \"LiuBei\",\r\n                \"prefab\": \"General\",\r\n                \"level\": 60,\r\n                \"hp\": 1200,\r\n                \"atk\": 8000,\r\n                \"def\": 50,\r\n                \"atkEff\": \"default_atk_particle\",\r\n                \"hitEff\": \"default_hit_particle\",\r\n                \"skill_name\": \"default\",\r\n                \"skillEff\": \"default_skill_particle\",\r\n                \"arms\": \"Archer_Lv1\",\r\n                \"is_sp\": false,\r\n                \"is_select\": true,\r\n                \"idx\": 1\r\n            },\r\n            {\r\n                \"id\": \"SunQuan_ally\",\r\n                \"name\": \"孙权\",\r\n                \"hero_id\": \"SunQuan\",\r\n                \"prefab\": \"General\",\r\n                \"level\": 60,\r\n                \"hp\": 2400,\r\n                \"atk\": 5500,\r\n                \"def\": 100,\r\n                \"atkEff\": \"default_atk_particle\",\r\n                \"hitEff\": \"default_hit_particle\",\r\n                \"skill_name\": \"default\",\r\n                \"skillEff\": \"default_skill_particle\",\r\n                \"arms\": \"Infantry_Lv1\",\r\n                \"is_sp\": false,\r\n                \"is_select\": true,\r\n                \"idx\": 2\r\n            },\r\n            {\r\n                \"id\": \"LvBu_ally\",\r\n                \"hero_id\": \"LvBu\",\r\n                \"name\": \"吕布\",\r\n                \"prefab\": \"General\",\r\n                \"level\": 60,\r\n                \"hp\": 2800,\r\n                \"atk\": 5500,\r\n                \"def\": 100,\r\n                \"atkEff\": \"default_atk_particle\",\r\n                \"hitEff\": \"default_hit_particle\",\r\n                \"skill_name\": \"default\",\r\n                \"skillEff\": \"default_skill_particle\",\r\n                \"arms\": \"Infantry_Lv1\",\r\n                \"is_sp\": true,\r\n                \"is_select\": true,\r\n                \"idx\": 3\r\n            },\r\n            {\r\n                \"id\": \"ZhugeLiang_ally\",\r\n                \"name\": \"诸葛亮\",\r\n                \"hero_id\": \"ZhugeLiang\",\r\n                \"prefab\": \"General\",\r\n                \"level\": 60,\r\n                \"hp\": 1500,\r\n                \"atk\": 7000,\r\n                \"def\": 80,\r\n                \"atkEff\": \"default_atk_particle\",\r\n                \"hitEff\": \"default_hit_particle\",\r\n                \"skill_name\": \"default\",\r\n                \"skillEff\": \"default_skill_particle\",\r\n                \"arms\": \"Cavalry_Lv1\",\r\n                \"is_sp\": false,\r\n                \"is_select\": true,\r\n                \"idx\": 4\r\n            },\r\n            {\r\n                \"id\": \"ZhouYu_ally\",\r\n                \"name\": \"周瑜\",\r\n                \"hero_id\": \"ZhouYu\",\r\n                \"prefab\": \"General\",\r\n                \"level\": 60,\r\n                \"hp\": 1500,\r\n                \"atk\": 7000,\r\n                \"def\": 80,\r\n                \"atkEff\": \"default_atk_particle\",\r\n                \"hitEff\": \"default_hit_particle\",\r\n                \"skill_name\": \"default\",\r\n                \"skillEff\": \"default_skill_particle\",\r\n                \"arms\": \"Cavalry_Lv1\",\r\n                \"is_sp\": false,\r\n                \"is_select\": false,\r\n                \"idx\": 5\r\n            }\r\n        ],\r\n        \"formation\": { // 阵型\r\n            \"id\": \"crescent\",\r\n            \"name\": \"偃月阵\",\r\n            \"pos_idxs\": [1, 2, 3, 5, 6],\r\n            \"introduce\": \"提高暴击率\",\r\n            \"ids_idxs\": [\r\n                { \"id\": \"CaoCao_ally\", \"idx\": 0 },\r\n                { \"id\": \"LiuBei_ally\", \"idx\": 1 },\r\n                { \"id\": \"SunQuan_ally\", \"idx\": 2 },\r\n                { \"id\": \"LvBu_ally\", \"idx\": 3 },\r\n                { \"id\": \"ZhugeLiang_ally\", \"idx\": 4 }\r\n            ]\r\n        }\r\n    }\r\n    // #######################\r\n\r\n    onLoad() { // 本地测试阶段，后续服务端配合重写\r\n        this.start_btn = this.node.getChildByName(\"StartBtn\");\r\n        this.load_lbl = this.node.getChildByName(\"Loading\")?.getComponent(Label);\r\n        this.login_window = this.node.getChildByName(\"Login_window\");\r\n        if (!this.start_btn || !this.load_lbl || !this.login_window) { return; }\r\n        this.load_lbl.node.active = true;\r\n        this.login_window.active = false;\r\n        this.start_btn.active = false;\r\n\r\n        this.start_btn.on(\"click\", () => { // Select BattleField\r\n            Subscribe.trigger(\"load scene\", \"Main\", \"test_player\");\r\n        });\r\n\r\n        Subscribe.listen(\"login success\", this.name, () => {\r\n            if (!this.start_btn) { return; }\r\n            this.start_btn.active = true;\r\n        });\r\n    }\r\n}\r\n"]}