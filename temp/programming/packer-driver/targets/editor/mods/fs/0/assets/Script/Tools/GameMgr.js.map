{"version":3,"sources":["file:///E:/GitHub/HelloTK/assets/Script/Tools/GameMgr.ts"],"names":["_decorator","Component","director","InventoryMgr","Generator","ImgMgr","MoveCamera","Subscribe","ccclass","property","GameMgr","onLoad","listen","name","getInstance","is_img_ready","is_gen_ready","trigger","pause","resume"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,Q,OAAAA,Q;;AAC7BC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;yBAGjBU,O,WADZF,OAAO,CAAC,SAAD,C,yBAAR,MACaE,OADb,SAC6BT,SAD7B,CACuC;AAAA;AAAA;;AAAA,gDAEH,KAFG;;AAAA,gDAGH,KAHG;AAAA;;AAKnCU,QAAAA,MAAM,GAAG;AACL;AAAA;AAAA,sCAAUC,MAAV,CAAiB,eAAjB,EAAkC,KAAKC,IAAvC,EAA6C,MAAM;AAC/C;AACA;AAAA;AAAA,wCAAUC,WAAV,GAF+C,CAEnB;;AAC5B;AAAA;AAAA,0CAAWA,WAAX,GAH+C,CAGnB;;AAC5B;AAAA;AAAA,kCAAOA,WAAP,GAJ+C,CAInB;;AAC5B;AAAA;AAAA,8CAAaA,WAAb,GAL+C,CAKnB;AAC5B;AACH,WAPD;AAQA;AAAA;AAAA,sCAAUF,MAAV,CAAiB,cAAjB,EAAiC,KAAKC,IAAtC,EAA4C,MAAM;AAC9C,iBAAKE,YAAL,GAAoB,IAApB;;AACA,gBAAI,KAAKC,YAAT,EAAsB;AAClB;AAAA;AAAA,0CAAUC,OAAV,CAAkB,YAAlB;AACH;AACJ,WALD,EAKG,IALH;AAMA;AAAA;AAAA,sCAAUL,MAAV,CAAiB,iBAAjB,EAAoC,KAAKC,IAAzC,EAA+C,MAAM;AACjD,iBAAKG,YAAL,GAAoB,IAApB;;AACA,gBAAI,KAAKD,YAAT,EAAsB;AAClB;AAAA;AAAA,0CAAUE,OAAV,CAAkB,YAAlB;AACH;AACJ,WALD;AAMA;AAAA;AAAA,sCAAUL,MAAV,CAAiB,OAAjB,EAA0B,KAAKC,IAA/B,EAAqC,MAAM;AAAEX,YAAAA,QAAQ,CAACgB,KAAT;AAAmB,WAAhE,EArBK,CAqB8D;;AACnE;AAAA;AAAA,sCAAUN,MAAV,CAAiB,QAAjB,EAA2B,KAAKC,IAAhC,EAAsC,MAAM;AAAEX,YAAAA,QAAQ,CAACiB,MAAT;AAAoB,WAAlE,EAtBK,CAsBgE;AACxE;;AA5BkC,O","sourcesContent":["import { _decorator, Component, Node, director } from 'cc';\r\nimport { InventoryMgr } from '../UI/MainScene/Inventory/InventoryMgr';\r\nimport { Generator } from './Generator';\r\nimport { ImgMgr } from './ImgMgr';\r\nimport { MoveCamera } from './MoveCamera';\r\nimport { Subscribe } from './Subscribe';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameMgr')\r\nexport class GameMgr extends Component {\r\n\r\n    private is_img_ready: boolean = false;\r\n    private is_gen_ready: boolean = false;\r\n\r\n    onLoad() {\r\n        Subscribe.listen(\"bundle loaded\", this.name, () => {\r\n            // #############################\r\n            Generator.getInstance();    // #\r\n            MoveCamera.getInstance();   // #\r\n            ImgMgr.getInstance();       // #\r\n            InventoryMgr.getInstance(); // #\r\n            // #############################\r\n        });\r\n        Subscribe.listen(\"ImgMgr ready\", this.name, () => {\r\n            this.is_img_ready = true;\r\n            if (this.is_gen_ready){\r\n                Subscribe.trigger(\"game start\");\r\n            }\r\n        }, this);\r\n        Subscribe.listen(\"Generator ready\", this.name, () => {\r\n            this.is_gen_ready = true;\r\n            if (this.is_img_ready){\r\n                Subscribe.trigger(\"game start\");\r\n            }\r\n        });\r\n        Subscribe.listen(\"pause\", this.name, () => { director.pause(); }); // 暂停游戏\r\n        Subscribe.listen(\"resume\", this.name, () => { director.resume(); }); // 恢复游戏\r\n    }\r\n}\r\n"]}