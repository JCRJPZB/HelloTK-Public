{"version":3,"sources":["file:///E:/GitHub/HelloTK/assets/Script/UI/MainScene/League/LeagueMgr.ts"],"names":["_decorator","Component","Subscribe","ccclass","property","LeagueMgr","constructor","name","Map","info_list","loadLeagueList","forEach","info","info_map","set","dynamics","loadDynamics","dynamic","dynamic_map","shop_list","loadShopList","shop","shop_list_map","listen","league_id","pid","get","push","member_list","idx","indexOf","splice","getInstance","ist","test_data_league_list","test_data_league_dynamics","test_data_shop_list","getLeagueList","getLeagueInfoById","has","getLeagueDynamicsById","getLeagueShopListById"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nimport { Subscribe } from '../../../Tools/Subscribe';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LeagueMgr')\r\nexport class LeagueMgr extends Component {\r\n\r\n    private static ist: LeagueMgr;\r\n    private info_list: any[] = [];\r\n    private info_map: Map<string, any> = new Map();\r\n    private dynamic_map: Map<string, any> = new Map();\r\n    private shop_list_map: Map<string, any> = new Map();\r\n\r\n    // ###########################\r\n    private test_data_league_dynamics: any[] = [\r\n        {\r\n            \"league_id\": \"1000001\",\r\n            \"dynamics\": [\r\n                {\r\n                    \"dynamic_id\": \"001\",\r\n                    \"content\": \"欢迎 “路人甲” 加入七星盟！\",\r\n                    \"time\": \"2021-01-01\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"002\",\r\n                    \"content\": \"欢迎 “路人丙” 加入七星盟！\",\r\n                    \"time\": \"2021-01-01\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"003\",\r\n                    \"content\": \"“路人乙” 退出七星盟。\",\r\n                    \"time\": \"2021-01-02\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"004\",\r\n                    \"content\": \"“该用户已被封禁” 被请离七星盟。\",\r\n                    \"time\": \"2021-01-05\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"002\",\r\n                    \"content\": \"欢迎 “路人丙” 加入七星盟！\",\r\n                    \"time\": \"2021-01-01\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"003\",\r\n                    \"content\": \"“路人乙” 退出七星盟。\",\r\n                    \"time\": \"2021-01-02\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"004\",\r\n                    \"content\": \"“该用户已被封禁” 被请离七星盟。\",\r\n                    \"time\": \"2021-01-05\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"002\",\r\n                    \"content\": \"欢迎 “路人丙” 加入七星盟！\",\r\n                    \"time\": \"2021-01-01\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"003\",\r\n                    \"content\": \"“路人乙” 退出七星盟。\",\r\n                    \"time\": \"2021-01-02\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"004\",\r\n                    \"content\": \"“该用户已被封禁” 被请离七星盟。\",\r\n                    \"time\": \"2021-01-05\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"002\",\r\n                    \"content\": \"欢迎 “路人丙” 加入七星盟！\",\r\n                    \"time\": \"2021-01-01\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"003\",\r\n                    \"content\": \"“路人乙” 退出七星盟。\",\r\n                    \"time\": \"2021-01-02\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"004\",\r\n                    \"content\": \"“该用户已被封禁” 被请离七星盟。\",\r\n                    \"time\": \"2021-01-05\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"002\",\r\n                    \"content\": \"欢迎 “路人丙” 加入七星盟！\",\r\n                    \"time\": \"2021-01-01\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"003\",\r\n                    \"content\": \"“路人乙” 退出七星盟。\",\r\n                    \"time\": \"2021-01-02\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"004\",\r\n                    \"content\": \"“该用户已被封禁” 被请离七星盟。\",\r\n                    \"time\": \"2021-01-05\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"002\",\r\n                    \"content\": \"欢迎 “路人丙” 加入七星盟！\",\r\n                    \"time\": \"2021-01-01\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"003\",\r\n                    \"content\": \"“路人乙” 退出七星盟。\",\r\n                    \"time\": \"2021-01-02\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"004\",\r\n                    \"content\": \"“该用户已被封禁” 被请离七星盟。\",\r\n                    \"time\": \"2021-01-05\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"002\",\r\n                    \"content\": \"欢迎 “路人丙” 加入七星盟！\",\r\n                    \"time\": \"2021-01-01\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"003\",\r\n                    \"content\": \"“路人乙” 退出七星盟。\",\r\n                    \"time\": \"2021-01-02\"\r\n                },\r\n                {\r\n                    \"dynamic_id\": \"004\",\r\n                    \"content\": \"“该用户已被封禁” 被请离七星盟。\",\r\n                    \"time\": \"2021-01-05\"\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            \"league_id\": \"1000002\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000003\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000004\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000005\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000006\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000007\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000008\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000009\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000010\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000011\",\r\n            \"dynamics\": []\r\n        },\r\n        {\r\n            \"league_id\": \"1000012\",\r\n            \"dynamics\": []\r\n        }\r\n    ];\r\n\r\n    private test_data_league_list: any[] = [\r\n        {\r\n            \"league_id\": \"1000001\",\r\n            \"league_name\": \"七星盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"本服最强盟，入盟+V12345678审核。周贡不足350清人。\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000002\",\r\n            \"league_name\": \"002盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"002Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000003\",\r\n            \"league_name\": \"003盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"003Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000004\",\r\n            \"league_name\": \"004盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"004Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000005\",\r\n            \"league_name\": \"005盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"005Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000006\",\r\n            \"league_name\": \"006盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"006Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000007\",\r\n            \"league_name\": \"007盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"007Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000008\",\r\n            \"league_name\": \"008盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"008Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000009\",\r\n            \"league_name\": \"009盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"009Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000010\",\r\n            \"league_name\": \"010盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"010Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000011\",\r\n            \"league_name\": \"011盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"011Test\"\r\n        },\r\n        {\r\n            \"league_id\": \"1000012\",\r\n            \"league_name\": \"012盟\",\r\n            \"lord_pid\": \"22389299\",\r\n            \"lord_name\": \"紫冰\",\r\n            \"land\": \"82\",\r\n            \"num_of_member\": 498,\r\n            \"max_member\": 500,\r\n            \"member_list\": [],\r\n            \"flag\": \"default_league_flag\",\r\n            \"describe\": \"012Test\"\r\n        }\r\n    ];\r\n\r\n    private test_data_shop_list: any[] = [\r\n        {\r\n            \"league_id\": \"1000001\",\r\n            \"items\": [\r\n                {\r\n                    \"item_id\": \"10001\",\r\n                    \"currency\": \"coin\",\r\n                    \"price\": 1000,\r\n                    \"reserve\": 100\r\n                },\r\n                {\r\n                    \"item_id\": \"10002\",\r\n                    \"currency\": \"diamond\",\r\n                    \"price\": 10,\r\n                    \"reserve\": 20\r\n                },\r\n                {\r\n                    \"item_id\": \"10003\",\r\n                    \"currency\": \"coin\",\r\n                    \"price\": 500,\r\n                    \"reserve\": 50\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n    // ###########################\r\n\r\n    private constructor(name: string) {\r\n        super(name);\r\n        this.info_list = this.loadLeagueList();\r\n        this.info_list.forEach((info: any) => {\r\n            this.info_map.set(info[\"league_id\"], info);\r\n        });\r\n        let dynamics = this.loadDynamics();\r\n        dynamics.forEach((dynamic: any) => {\r\n            this.dynamic_map.set(dynamic[\"league_id\"], dynamic);\r\n        });\r\n        let shop_list = this.loadShopList();\r\n        shop_list.forEach((shop: any) => {\r\n            this.shop_list_map.set(shop[\"league_id\"], shop);\r\n        });\r\n\r\n        Subscribe.listen(\"player join league\", this.name, (league_id: string, pid: string) => {\r\n            // ####################################\r\n            //      更新消息至服务器 这里先手动改   #\r\n            // ####################################\r\n            let info = this.info_map.get(league_id); // Map中存放的是引用不是深拷贝的对象，所以修改Map中的元素，原数组中的元素也会对应修改\r\n            if (!info) {\r\n                return;\r\n            }\r\n            info[\"num_of_member\"]++;\r\n            info[\"member_list\"].push(pid);\r\n        });\r\n\r\n        Subscribe.listen(\"player leave league\", this.name, (league_id: string, pid: string) => {\r\n            // ####################################\r\n            //      更新消息至服务器 这里先手动改   #\r\n            // ####################################\r\n            let info = this.info_map.get(league_id);\r\n            if (!info) {\r\n                return;\r\n            }\r\n            info[\"num_of_member\"]--;\r\n            let member_list: string[] = info[\"member_list\"];\r\n            let idx = member_list.indexOf(pid);\r\n            member_list.splice(idx, 1);\r\n        });\r\n    }\r\n\r\n    public static getInstance() {\r\n        if (!LeagueMgr.ist) {\r\n            LeagueMgr.ist = new LeagueMgr(\"LeagueMgr\");\r\n        }\r\n        return LeagueMgr.ist;\r\n    }\r\n\r\n    public loadLeagueList() {\r\n        // ####################################\r\n        return this.test_data_league_list; // #\r\n        // ####################################\r\n    }\r\n\r\n    private loadDynamics() {\r\n        // ########################################\r\n        return this.test_data_league_dynamics; // #\r\n        // ########################################\r\n    }\r\n\r\n    private loadShopList() {\r\n        // ##################################\r\n        return this.test_data_shop_list; // #\r\n        // ##################################\r\n    }\r\n\r\n    public getLeagueList() { return this.info_list; }\r\n\r\n    public getLeagueInfoById(league_id: string) {\r\n        if (this.info_map.has(league_id)) { return this.info_map.get(league_id); }\r\n        return null;\r\n    }\r\n\r\n    public getLeagueDynamicsById(league_id: string) {\r\n        if (this.dynamic_map.has(league_id)) { return this.dynamic_map.get(league_id); }\r\n        return null;\r\n    }\r\n\r\n    public getLeagueShopListById(league_id: string) {\r\n        if (this.shop_list_map.has(league_id)) { return this.shop_list_map.get(league_id); }\r\n        return null;\r\n    }\r\n}\r\n"]}