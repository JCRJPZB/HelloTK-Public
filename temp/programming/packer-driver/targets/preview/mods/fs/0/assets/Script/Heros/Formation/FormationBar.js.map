{"version":3,"sources":["file:///E:/GitHub/HelloTK/assets/Script/Heros/Formation/FormationBar.ts"],"names":["_decorator","Component","Label","Subscribe","ccclass","property","FormationBar","onLoad","name_lbl","node","getChildByPath","getComponent","intro_lbl","trigger","getChildByName","point_dis","point_en","init","data","curr_id","string","on","isEnable","active","changeState"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,K,OAAAA,K;;AAC7BC,MAAAA,S,iBAAAA,S;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;8BAGjBM,Y,WADZF,OAAO,CAAC,cAAD,C,yBAAR,MACaE,YADb,SACkCL,SADlC,CAC4C;AAAA;AAAA;;AAAA,4CAEK,IAFL;;AAAA,6CAGM,IAHN;;AAAA,2CAIT,IAJS;;AAAA,6CAKP,IALO;;AAAA,4CAMR,IANQ;;AAAA,4CAOZ,KAPY;AAAA;;AAOL;AAEnCM,QAAAA,MAAM,GAAG;AAAA;;AAAE;AACP,eAAKC,QAAL,4BAAgB,KAAKC,IAAL,CAAUC,cAAV,CAAyB,kBAAzB,CAAhB,0DAAgB,sBAA8CC,YAA9C,CAA2DT,KAA3D,CAAhB;AACA,eAAKU,SAAL,6BAAiB,KAAKH,IAAL,CAAUC,cAAV,CAAyB,uBAAzB,CAAjB,2DAAiB,uBAAmDC,YAAnD,CAAgET,KAAhE,CAAjB;AACA,eAAKW,OAAL,GAAe,KAAKJ,IAAL,CAAUK,cAAV,CAAyB,SAAzB,CAAf;AACA,eAAKC,SAAL,GAAiB,KAAKN,IAAL,CAAUK,cAAV,CAAyB,SAAzB,CAAjB;AACA,eAAKE,QAAL,GAAgB,KAAKP,IAAL,CAAUK,cAAV,CAAyB,QAAzB,CAAhB;AACH;;AAEDG,QAAAA,IAAI,CAACC,IAAD,EAAYC,OAAZ,EAA6B;AAC7B,cAAI,KAAKX,QAAT,EAAmB;AAAE,iBAAKA,QAAL,CAAcY,MAAd,GAAuBF,IAAI,CAAC,MAAD,CAAJ,GAAe,GAAtC;AAA4C,WADpC,CACqC;;;AAClE,cAAI,KAAKN,SAAT,EAAoB;AAAE,iBAAKA,SAAL,CAAeQ,MAAf,GAAwBF,IAAI,CAAC,WAAD,CAA5B;AAA4C,WAFrC,CAEsC;;;AACnE,cAAI,KAAKL,OAAL,IAAgB,KAAKE,SAArB,IAAkC,KAAKC,QAA3C,EAAqD;AAAE;AACnD,iBAAKH,OAAL,CAAaQ,EAAb,CAAgB,OAAhB,EAAyB,MAAM;AAAE,kBAAI,CAAC,KAAKC,QAAV,EAAoB;AAAA;AAAA,0CAAUT,OAAV,CAAkB,kBAAlB,EAAsCK,IAAI,CAAC,IAAD,CAA1C;AAAoD,aAAzG;AACA,iBAAKH,SAAL,CAAeQ,MAAf,GAAwB,IAAxB,CAFiD,CAEnB;;AAC9B,iBAAKP,QAAL,CAAcO,MAAd,GAAuB,KAAvB;;AACA,gBAAIL,IAAI,CAAC,IAAD,CAAJ,IAAcC,OAAlB,EAA2B;AAAE;AACzB,mBAAKH,QAAL,CAAcO,MAAd,GAAuB,IAAvB,CADuB,CACM;;AAC7B,mBAAKR,SAAL,CAAeQ,MAAf,GAAwB,KAAxB;AACA,mBAAKD,QAAL,GAAgB,IAAhB;AACH;AACJ;AACJ;;AAEDE,QAAAA,WAAW,CAACF,QAAD,EAAoB;AAAE;AAC7B,cAAI,KAAKP,SAAL,IAAkB,KAAKC,QAA3B,EAAqC;AACjC,iBAAKD,SAAL,CAAeQ,MAAf,GAAwB,CAACD,QAAzB;AACA,iBAAKN,QAAL,CAAcO,MAAd,GAAuBD,QAAvB;AACA,iBAAKA,QAAL,GAAgBA,QAAhB;AACH;AACJ;;AAtCuC,O","sourcesContent":["import { _decorator, Component, Node, Label } from 'cc';\r\nimport { Subscribe } from '../../Tools/Subscribe';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('FormationBar')\r\nexport class FormationBar extends Component {\r\n\r\n    private name_lbl: Label | null | undefined = null; // 阵型名Label\r\n    private intro_lbl: Label | null | undefined = null; // 阵型介绍Label\r\n    private trigger: Node | null = null; // 点击触发器节点\r\n    private point_dis: Node | null = null; // 未激活时的标记节点\r\n    private point_en: Node | null = null; // 激活时的标记节点\r\n    private isEnable: boolean = false; // 是否激活flag\r\n\r\n    onLoad() { // 获取各个组件\r\n        this.name_lbl = this.node.getChildByPath(\"Mask/Layout/Name\")?.getComponent(Label);\r\n        this.intro_lbl = this.node.getChildByPath(\"Mask/Layout/Introduce\")?.getComponent(Label);\r\n        this.trigger = this.node.getChildByName(\"Trigger\");\r\n        this.point_dis = this.node.getChildByName(\"Disable\");\r\n        this.point_en = this.node.getChildByName(\"Enable\");\r\n    }\r\n\r\n    init(data: any, curr_id: string) {\r\n        if (this.name_lbl) { this.name_lbl.string = data[\"name\"] + \"：\"; } // 更新名称\r\n        if (this.intro_lbl) { this.intro_lbl.string = data[\"introduce\"]; } // 更新简介\r\n        if (this.trigger && this.point_dis && this.point_en) { // 点击事件\r\n            this.trigger.on(\"click\", () => { if (!this.isEnable) Subscribe.trigger(\"change formation\", data[\"id\"]); });\r\n            this.point_dis.active = true; // 初始化标记点状态\r\n            this.point_en.active = false;\r\n            if (data[\"id\"] == curr_id) { // 根据玩家数据判断是否当前选中\r\n                this.point_en.active = true; // 是当前选中则修改标记点状态\r\n                this.point_dis.active = false;\r\n                this.isEnable = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    changeState(isEnable: boolean) { // 修改选中状态\r\n        if (this.point_dis && this.point_en) {\r\n            this.point_dis.active = !isEnable;\r\n            this.point_en.active = isEnable;\r\n            this.isEnable = isEnable;\r\n        }\r\n    }\r\n}\r\n"]}