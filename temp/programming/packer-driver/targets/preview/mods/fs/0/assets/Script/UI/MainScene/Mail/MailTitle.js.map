{"version":3,"sources":["file:///E:/GitHub/HelloTK/assets/Script/UI/MainScene/Mail/MailTitle.ts"],"names":["_decorator","Component","Label","Subscribe","ccclass","property","MailTitle","init","info","callback","listen","id","isUnRead","active","hasAnnex","title_lbl","node","getChildByName","getComponent","string","on"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,K,OAAAA,K;;AAC7BC,MAAAA,S,iBAAAA,S;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;2BAGjBM,S,WADZF,OAAO,CAAC,WAAD,C,yBAAR,MACaE,SADb,SAC+BL,SAD/B,CACyC;AAAA;AAAA;;AAAA,6CAES,IAFT;;AAAA,4CAGL,IAHK;;AAAA,4CAIL,IAJK;AAAA;;AAMrCM,QAAAA,IAAI,CAACC,IAAD,EAAYC,QAAZ,EAAwC;AAAA;;AACxC;AAAA;AAAA,sCAAUC,MAAV,CAAiB,WAAjB,EAA8BF,IAAI,CAAC,SAAD,CAAlC,EAAgDG,EAAD,IAAgB;AAC3D,gBAAI,KAAKC,QAAL,IAAiBD,EAAE,IAAIH,IAAI,CAAC,SAAD,CAA/B,EAA4C;AAAE,mBAAKI,QAAL,CAAcC,MAAd,GAAuB,KAAvB;AAA+B;AAChF,WAFD;AAGA;AAAA;AAAA,sCAAUH,MAAV,CAAiB,eAAjB,EAAkCF,IAAI,CAAC,SAAD,CAAtC,EAAoDG,EAAD,IAAgB;AAC/D,gBAAI,KAAKG,QAAL,IAAiBH,EAAE,IAAIH,IAAI,CAAC,SAAD,CAA/B,EAA4C;AAAE,mBAAKM,QAAL,CAAcD,MAAd,GAAuB,KAAvB;AAA+B;AAChF,WAFD;AAGA,eAAKE,SAAL,4BAAiB,KAAKC,IAAL,CAAUC,cAAV,CAAyB,OAAzB,CAAjB,0DAAiB,sBAAmCC,YAAnC,CAAgDhB,KAAhD,CAAjB;AACA,eAAKU,QAAL,GAAgB,KAAKI,IAAL,CAAUC,cAAV,CAAyB,UAAzB,CAAhB;AACA,eAAKH,QAAL,GAAgB,KAAKE,IAAL,CAAUC,cAAV,CAAyB,UAAzB,CAAhB;;AACA,cAAI,KAAKF,SAAT,EAAoB;AAAE,iBAAKA,SAAL,CAAeI,MAAf,GAAwBX,IAAI,CAAC,YAAD,CAA5B;AAA6C;;AACnE,cAAI,KAAKI,QAAT,EAAmB;AAAE,iBAAKA,QAAL,CAAcC,MAAd,GAAuBL,IAAI,CAAC,UAAD,CAA3B;AAA0C;;AAC/D,cAAI,KAAKM,QAAL,IAAiBN,IAAI,CAAC,UAAD,CAAzB,EAAuC;AAAC,iBAAKM,QAAL,CAAcD,MAAd,GAAuB,CAACL,IAAI,CAAC,WAAD,CAA5B;AAA4C;;AACpF,eAAKQ,IAAL,CAAUI,EAAV,CAAa,OAAb,EAAsB,MAAM;AACxB,gBAAI,KAAKR,QAAT,EAAmB;AAAE,mBAAKA,QAAL,CAAcC,MAAd,GAAuB,KAAvB;AAA+B;;AACpDJ,YAAAA,QAAQ;AACX,WAHD;AAIH;;AAvBoC,O","sourcesContent":["import { _decorator, Component, Node, Label } from 'cc';\r\nimport { Subscribe } from '../../../Tools/Subscribe';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MailTitle')\r\nexport class MailTitle extends Component {\r\n\r\n    private title_lbl: Label | null | undefined = null;\r\n    private isUnRead: Node | null = null;\r\n    private hasAnnex: Node | null = null;\r\n\r\n    init(info: any, callback: CallableFunction) {\r\n        Subscribe.listen(\"read mail\", info[\"mail_id\"], (id: string) => {\r\n            if (this.isUnRead && id == info[\"mail_id\"]) { this.isUnRead.active = false; }\r\n        });\r\n        Subscribe.listen(\"collect annex\", info[\"mail_id\"], (id: string) => {\r\n            if (this.hasAnnex && id == info[\"mail_id\"]) { this.hasAnnex.active = false; }\r\n        });\r\n        this.title_lbl = this.node.getChildByName(\"Label\")?.getComponent(Label);\r\n        this.isUnRead = this.node.getChildByName(\"IsUnRead\");\r\n        this.hasAnnex = this.node.getChildByName(\"HasAnnex\");\r\n        if (this.title_lbl) { this.title_lbl.string = info[\"mail_title\"]; }\r\n        if (this.isUnRead) { this.isUnRead.active = info[\"isUnRead\"]; }\r\n        if (this.hasAnnex && info[\"hasAnnex\"]) {this.hasAnnex.active = !info[\"collected\"]; }\r\n        this.node.on(\"click\", () => {\r\n            if (this.isUnRead) { this.isUnRead.active = false; }\r\n            callback();\r\n        });\r\n    }\r\n}\r\n"]}